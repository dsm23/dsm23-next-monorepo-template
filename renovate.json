{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices",
    "customManagers:dockerfileVersions",
    "group:jsUnitTest",
    "group:vite",
    "helpers:pinGitHubActionDigestsToSemver",
    "security:openssf-scorecard",
    ":approveMajorUpdates",
    ":enableVulnerabilityAlerts",
    ":pinAllExceptPeerDependencies"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": ["/(^|/)prettier.config.js$/"],
      "depNameTemplate": "typescript",
      "datasourceTemplate": "npm",
      "matchStrings": [
        "\\/\\/ renovate: datasource=(?<datasource>[a-zA-Z0-9-._]+?) depName=(?<depName>[^\\s]+?)(?: (?:lookupName|packageName)=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?(?: extractVersion=(?<extractVersion>[^\\s]+?))?\\s+importOrderTypeScriptVersion\\s*\\:\\s*[\"']?(?<currentValue>.+?)[\"']"
      ]
    },
    {
      "customType": "regex",
      "managerFilePatterns": ["/(^|/)unit-testing.yml$/"],
      "depNameTemplate": "dawidd6/action-download-artifact",
      "datasourceTemplate": "github-releases",
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-zA-Z0-9-._]+?) depName=(?<depName>[^\\s]+?)(?: (?:lookupName|packageName)=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?(?: extractVersion=(?<extractVersion>[^\\s]+?))?\\s+uses\\:\\s*dawidd6\\/action-download-artifact@(?<currentDigest>[A-Za-z0-9]*)\\s+#\\s+(?<currentValue>.+?)\\s+"
      ]
    }
  ],
  "packageRules": [
    {
      "extends": ["packages:eslint"],
      "groupName": "eslint packages"
    },
    {
      "groupName": "prettier packages",
      "matchPackageNames": ["prettier**", "@ianvs/prettier-plugin-sort-imports"]
    },
    {
      "extends": ["packages:react"],
      "groupName": "react packages"
    },
    {
      "extends": ["packages:stylelint"],
      "groupName": "stylelint packages"
    },
    {
      "groupName": "nextjs monorepo",
      "matchPackageNames": ["@next/**", "eslint-plugin-next", "next"]
    },
    {
      "groupName": "playwright monorepo",
      "matchPackageNames": [
        "playwright",
        "@playwright/test",
        "mcr.microsoft.com/playwright"
      ]
    },
    {
      "groupName": "storybook monorepo",
      "matchPackageNames": [
        "@storybook/**",
        "eslint-plugin-storybook",
        "storybook"
      ]
    },
    {
      "groupName": "turbo monorepo",
      "matchPackageNames": ["@turbo/**", "eslint-plugin-turbo", "turbo"]
    },
    {
      "description": "Stricter security:minimumReleaseAgeNpm",
      "matchDatasources": ["npm"],
      "matchManagers": ["npm"],
      "minimumReleaseAge": "3 days",
      "internalChecksFilter": "strict"
    },
    {
      "description": "Do not require Minimum Release Age for update types that are controlled by the package manager",
      "matchDatasources": ["npm"],
      "matchUpdateTypes": ["lockFileMaintenance"],
      "prBodyNotes": [
        "⚠️ Renovate's lock file maintenance functionality does not support validating Minimum Release Age, as the package manager performs the required changes to update package(s). Confirm whether your package manager perform its own validation for the Minimum Release Age of packages."
      ],
      "minimumReleaseAge": null
    },
    {
      "description": "Do not require Minimum Release Age for package replacements",
      "matchDatasources": ["npm"],
      "matchUpdateTypes": ["replacement"],
      "prBodyNotes": [
        "⚠️ Renovate's replacement functionality [does not currently](https://github.com/renovatebot/renovate/issues/39400) wire in the release age for a package, so the Minimum Release Age checks can apply. You will need to manually validate the Minimum Release Age for these package(s)."
      ],
      "minimumReleaseAge": null
    }
  ],
  "rebaseWhen": "conflicted",
  "patch": {
    "rebaseWhen": "behind-base-branch"
  },
  "osvVulnerabilityAlerts": true
}
